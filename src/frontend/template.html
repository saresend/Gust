<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.8/vega.min.js"></script>

    <script type="text/javascript">
        var view;

        vega.loader()
            .load('{{data}}')
            .then(function (data) { render(JSON.parse(data)); });

        function render(spec) {
            view = new vega.View(vega.parse(spec))
                .renderer('canvas')  // set renderer (canvas or svg)
                .initialize('#view') // initialize view within parent DOM container
                .hover()             // enable hover encode set processing
                .run();
        }
    </script>
</head>

<body>
    <h1>{{title}}</h1>
    <div id="view"></div>
</body>